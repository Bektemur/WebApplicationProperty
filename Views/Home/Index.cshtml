@using WebApplicationProperty.Models
@using WebApplicationProperty.ViewModel
@{
    ViewData["Title"] = "Home Page";
    string getRelativeDateTime(DateTime date)
    {
        TimeSpan ts = DateTime.Now - date;
        if (ts.TotalMinutes < 1)//seconds ago
            return "just now";
        if (ts.TotalHours < 1)//min ago
            return (int)ts.TotalMinutes == 1 ? "1 Minute ago" : (int)ts.TotalMinutes + " Minutes ago";
        if (ts.TotalDays < 1)//hours ago
            return (int)ts.TotalHours == 1 ? "1 Hour ago" : (int)ts.TotalHours + " Hours ago";
        if (ts.TotalDays < 7)//days ago
            return (int)ts.TotalDays == 1 ? "1 Day ago" : (int)ts.TotalDays + " Days ago";
        if (ts.TotalDays < 30.4368)//weeks ago
            return (int)(ts.TotalDays / 7) == 1 ? "1 Week ago" : (int)(ts.TotalDays / 7) + " Weeks ago";
        if (ts.TotalDays < 365.242)//months ago
            return (int)(ts.TotalDays / 30.4368) == 1 ? "1 Month ago" : (int)(ts.TotalDays / 30.4368) + " Months ago";
        //years ago
        return (int)(ts.TotalDays / 365.242) == 1 ? "1 Year ago" : (int)(ts.TotalDays / 365.242) + " Years ago";
    }
}
@model IndexViewModel
<style>
    .box {
        position: relative;
        display: inline-block;
    }

        .box .text {
            position: absolute;
            z-index: 999;
            margin: 0 auto;
            left: 0;
            right: 0;
            text-align: left;
            top: 20%;
            font-family: Arial,sans-serif;
            color: #fff;
            width: 80%;
            height: 30%;
        }
</style>

<div class="box">
    <img src="~/images/bangkok-home-banners.jpg" style="width:100%;" />
    <div class="text">
        <h1><b>Bangkok Property</b></h1>

        <h1><b>Solutions Co,.Ltd</b></h1>

        <h4>We Serve the Best</h4>
    </div>
</div>

<p class="d-flex justify-content-center"></p><h2 style="margin-top:50px; margin-left:100px">Properties</h2>

            <table class="d-flex justify-content-center" style="margin-top:50px">
                <tr>
                    @{
                        int count = 0; int counttable = 0;
                        foreach (var item in Model.ListProperty)
                        {
                            if (counttable++ % 3 == 0)
                            {
                            @:</tr><tr>
                            }
                            @:<td style="padding-right:50px">
                                <div class="card" style="width: 18rem;">


                                        <div id="carouselExampleControls-@count" class="carousel slide" data-ride="carousel">
                                        <div class="carousel-inner">
                                            <div class="carousel-item active">
                                                <img class="card-img-top" src="~/@item.FileSystemModels.Select(v => v.FilePath).FirstOrDefault()">
                                            </div>
                                            @foreach (var image in item.FileSystemModels)
                                            {


                                                <div class="carousel-item">
                                                    <img src="~/@image.FilePath" alt="@image.Name" class="card-img-top" />
                                                </div>
                                            }
                                        </div>
                                        <a class="carousel-control-prev" href="#carouselExampleControls-@count" role="button" data-slide="prev">
                                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                            <span class="sr-only">Previous</span>
                                        </a>
                                        <a class="carousel-control-next" href="#carouselExampleControls-@count" role="button" data-slide="next">
                                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                            <span class="sr-only">Next</span>
                                        </a>
                                        </div>

                                        <div class="card-body">
                                        <h5 class="card-title"><a asp-area="" asp-controller="Home" asp-action="Details" asp-route-id="@item.PropertyId">@item.Name</a></h5>
                                        <p class="card-text">@Html.Raw(@item.Description)</p>
                                        <p class="card-text"><small class="text-muted">Last updated @getRelativeDateTime(@item.Update_date)</small></p>
                                        <p class="card-text float-right" style="background-color:silver; margin-top:-50px"> @item.Price THB</p>
                                        </div>

                                    </div>
                            @:</td>


                            count++;

                        }

                    @:</tr>
                    }
                </table>
            
